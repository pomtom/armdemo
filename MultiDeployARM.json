{
    "$schema": "https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#",
    "contentVersion": "1.0.0.0",
    "parameters": {
        "arm_userIdentityName": {
            "type": "string",
            "minLength": 1,
            "defaultValue": "uami-btl-app",
            "metadata": {
                "description": "Name of the user assign identity, must be unique"
            }
        },
        "roleNameGuid": {
            "type": "string",
            "defaultValue": "[newGuid()]",
            "metadata": {
                "description": "A new GUID used to identify the role assignment"
            }
        },
        "arm_hostingPlanName": {
            "type": "string",
            "defaultValue": "uami-webapp-plan",
            "minLength": 1,
            "metadata": {
                "description": "Name of the html delivery, must be unique"
            }
        },
        "arm_skuName": {
            "type": "string",
            "minLength": 1,
            "allowedValues": [ "D1", "F1", "B1", "B2", "B3", "S1", "S2", "S3", "P1", "P2", "P3", "P1V2", "P2V2", "P3V2", "I1", "I2", "I3", "Y1" ],
            "defaultValue": "F1",
            "metadata": {
                "description": "The pricing tier for the hosting plan. https://docs.microsoft.com/en-gb/azure/azure-resource-manager/management/azure-subscription-service-limits#app-service-limits"
            }
        },
        "arm_storageAccountName": {
            "type": "string",
            "defaultValue": "uamistorageapp",
            "minLength": 1,
            "metadata": {
                "description": "storage account name."
            }
        },
        "arm_storageAccountType": {
            "type": "string",
            "minLength": 1,
            "defaultValue": "Standard_LRS",
            "allowedValues": [ "Standard_LRS", "Standard_GRS", "Standard_RAGRS", "Standard_ZRS", "Premium_LRS", "Premium_ZRS", "Standard_GZRS", "Standard_RAGZRS" ]
        }
    },
    "variables": {
        "Role_StorageBlobDataContributor": "[concat('/subscriptions/', subscription().subscriptionId, '/providers/Microsoft.Authorization/roleDefinitions/', 'ba92f5b4-2d11-453d-a403-e96b0029c9fe')]",
        "containerName": "[format('{0}/default/{1}', parameters('arm_storageAccountName'), 'compilonex')]"
    },
    "resources": [
        {
            "type": "Microsoft.Web/serverfarms",
            "apiVersion": "2021-02-01",
            "kind": "app",
            "location": "[resourceGroup().location]",
            "name": "[parameters('arm_hostingPlanName')]",
            "properties": {
                "perSiteScaling": true
            },
            "sku": {
                "capacity": 1,
                "name": "[parameters('arm_skuName')]",
                "size": "[parameters('arm_skuName')]"
            },
            "tags": {

            }
        }
    ],
    "outputs": {}
}